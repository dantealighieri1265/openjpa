<?xml version="1.0" encoding="UTF-8" ?>
<project name="maven-antrun-" default="main"  >
<target name="main">
  <echo>Determining if there are uncommitted changes...</echo>
  <exec resultproperty="diff.state" failifexecutionfails="false" failonerror="false" outputproperty="git.diff.exitval" executable="git">
    <arg line="diff --quiet HEAD"/>
  </exec>
  <exec resultproperty="diff.state.cached" failifexecutionfails="false" failonerror="false" outputproperty="git.diff.cached.exitval" executable="git">
    <arg line="diff --cached --quiet HEAD"/>
  </exec>
  <condition else="" property="uncommitted.changes" value="M">
    <or>
      <equals arg2="1" arg1="${diff.state}"/>
      <equals arg2="1" arg1="${diff.state.cached}"/>
    </or>
  </condition>
  <echo>Getting the &apos;GIT&apos; revision value</echo>
  <exec failifexecutionfails="false" failonerror="false" outputproperty="git.revision" executable="git">
    <arg line="rev-parse --short=7 HEAD"/>
  </exec>
  <echo>Revision: ${git.revision}${uncommitted.changes}</echo>
  <echo>Getting the &apos;PCEnhancer&apos; revision value</echo>
  <exec failifexecutionfails="false" failonerror="false" outputproperty="pcenhancer.git.revision" executable="git" append="false">
    <arg line="rev-parse --short=7 HEAD:./../openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java"/>
  </exec>
  <echo>openjpa.enhancer.revision=${pcenhancer.git.revision}${uncommitted.changes}</echo>
  <echo>OpenJPA version: 3.1.3-SNAPSHOT</echo>
  <condition else="C:\Users\marco\AppData\Local\Temp\/openjpamvntmp" property="outdir" value="C:\Users\marco\Desktop\de-angelis\openjpa\openjpa-lib\target\classes">
    <available file="C:\Users\marco\Desktop\de-angelis\openjpa\openjpa-lib\target\classes" type="dir"/>
  </condition>
  <mkdir dir="${outdir}/META-INF"/>
  <echo file="${outdir}/META-INF/org.apache.openjpa.revision.properties">revision.number=${git.revision}${uncommitted.changes}
openjpa.version=3.1.3-SNAPSHOT
openjpa.enhancer.revision=${pcenhancer.git.revision}${uncommitted.changes}</echo>
</target>
</project>